<link rel="stylesheet" href="/css/user-pages/Userorders.css">


<h1>Tus facturas</h1>
<div id="facturas-container"></div>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      const res = await fetch("/api/user/orders", {
        credentials: "include"
      });
      const orders = await res.json();

      const container = document.getElementById("facturas-container");

      if (orders.length === 0) {
        container.innerHTML = "<p>No tienes facturas registradas.</p>";
        return;
      }

      orders.forEach(order => {
        const div = document.createElement("div");
        div.classList.add("factura");

        div.innerHTML = `
          <h3>Factura #${order._id}</h3>
          <p>Total: $${order.total}</p>
          <p>Estado: ${order.status}</p>
          <button onclick="verDetalle('${order._id}')">Ver Detalles</button>
        `;

        container.appendChild(div);
      });
    } catch (err) {
      console.error("Error cargando facturas:", err);
    }
  });

  function verDetalle(orderId) {
    window.location.href = `/pages/user/orders-details.html?id=${orderId}`;
  }
</script>
